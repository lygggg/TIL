### 목차
- 어떻게 함수로 정보가 들어가고 나오는지 살펴봅니다.
- 테스트 하기 쉽고 재사용성이 좋은 코드를 만들기 위한 함수형 기술에 대해 알아봅니다.
- 액션에서 계산을 빼내는 방법을 배웁니다.

## 함수에 암묵적 입력과 출력이 있으면 액션이 된다.

### 암묵적 입력
- 인자 외 다른 입력

### 암묵적 출력
- 리턴값 외 다른 출력

## 액션에서 계산 빼내기

```ts
function calc_cart_total() {
	calc_total();
	set_cart_total_dom();
	update_shipping_icons();
	update_tax_dom();
}
```

```ts
function calc_total() {
	shopping_cart_total = 0; // 출력
	for(var i = 0; i < shopping_cart.length; i++) { // 입력
	var item = shopping_cart[i];
	shopping_cart_total += item.price; // 출력
	}
}
```

출력은 모두 같은 전역변숫값으로 바꿉니다. 그래서 같은 리턴값을 사용해 바꿀 수 있습니다.  전역변수 대신 지역변수를 사용하도록 바꾸고 지역변숫값을 리턴하도록 고치겠습니다.

```ts
function calc_cart_total() {
	shopping_cart_total = calc_total(); // 리턴값을 받아 전역변수에 할당
	set_cart_total_dom();
	update_shipping_icons();
	update_tax_dom();


function calc_total() {
	let total = 0; // 지역변수 사용
	for(var i = 0; i < shopping_cart.length; i++) { // 입력
	var item = shopping_cart[i];
	total += item.price; // 출력
	}
	return total; // 지역변수 리턴
}
```

### 액션에서 또 다른 계산 빼내기
```ts
function add_item_to_cart(name, price) {
	shopping_cart.push({
	name: name,
	price: price
	})

	calc_cart_total();
}
```

바꾼 코드
```ts
function add_item_to_cart(name, price) {
	add_item(name, price);
	calc_cart_total();
	
}

function add_item(name, price) {
shopping_cart.push({
	name: name,
	price: price
	});
}
```

### 재사용성을 높이고 쉽게 테스트할 수 있는 것이 함수형 프로그래밍으로 얻을 수 있는 전부인가요?
함수형 프로그래밍으로 재사용하기 좋고 테스트하기 쉬운 코드를 만들 수 는 있지만 그것이 전부는 아니다. 이 책 끝 부분에서 동시성이나 설계, 데이터 모델링 측면에서 좋은 점들을 설명할 예정이다.

함수형 프로그래밍의 목적중 어떤것을 분리해서 더 작게 만들려고 하는 것도 있다. 작은 것은 테스트하기 쉽고, 재사용하기 쉽고, 이해하기 쉽다.

## 계산 추출을 단계별로 알아보기
### 1. 계산 코드를 찾아 빼내기
빼낼 코드를 찾고 코드를 추출해 새로운 함수를 만들어 리팩터링 한다. 새 함수에 인자가 필요하다면 추가합니다. 원래 코드에서 빼낸 부분에 새 함수를 부르도록 바꿉니다.
### 2. 새 함수에 암묵적 입력과 출력 찾기
새 함수에 임묵적 입력과 출력을 찾는다. 암묵적 입력은 함수를 부르는 동안 결과에 영향을 줄 수 있는 것을 말한다. 암묵적 출력은 함수 호출의 결과로 영향을 받는 것을 말한다.

함수 인자를 포함해 함수 밖에 있는 변수를 읽거나 데이터베이스에서 값을 가져오는 것은 입력이다.

리턴값을 포함해 전역변수를 바꾸거나 공유 객체를 바꾸거나, 웹 요청을 보내는 것은 출력이다.
### 3. 암묵적 입력은 인자로 암묵적 출력은 리턴값으로 바꾸기
한 번에 하나씩 입력은 인자로 출력은 리턴값으로 바꿉니다. 새로운 리턴값이 생겼다면 호출하는 코드에서 함수의 결과를 변수에 할당해야 할 수 있습니다.

여기서 인자와 리턴값은 변하지 않는 불변값이라는 것이 중요합니다. 리턴값이 나중에 바뀐다면 암묵적 출력입니다. 또 인자로 받은 값이 바뀔수 있다면 암묵적 입력입니다.

## 요점 정리
- 액션은 암묵적인 입력 또는 출력을 가지고 있다.
- 계산의 정의에 따르면 계산은 암묵적인 입력 또는 출력이 없어야 한다.
- 공유 변수(전역 변수)는 일반적으로 암묵적 입력 또는 출력이 된다.
- 암묵적 입력은 인자로 바꿀 수 있다.
- 암묵적 출력은 리턴값으로 바꿀 수 있다.
- 함수형 원칙을 적용하면 액션은 줄어들고 계산은 늘어난다.

## 결론
결국 우리는 액션에서 계산, 데이터를 빼내고, 액션을 최대한 가볍게 만들어야한다. 흔히 말하는 순수함수(계산), 데이터로 분리한다면 한눈에 파악하기 명확하고, 재사용이 용이하고, 테스트하기 쉬운 코드를 작성할 수 있다.