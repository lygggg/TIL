### 목차
- 코드를 모듈화하기 위해 추상화 벽을 만드는 법을 배웁니다.
- 좋은 인터페이스가 어떤 것이고, 어떻게 찾는지 알아봅니다.
- 설계가 이만하면 되었다고 할 수 있는 시점을 압니다.
- 왜 게층형 설계가 유지보수와 테스트, 재사용에 도움이 되는지 이해합니다.
## 패턴 2: 추상화 벽
호출 그래프에 어떤 계층은 중요한 세부 구현을 감추고 인터페이스를 제공합니다. 인터페이스를 사용하여 코드를 만들면 높은 차원으로 생각할 수 있습니다. 고수준의 추상화 단계만 생각하면 되기 때문에 두뇌 용량의 한계를 극복할 수 있습니다.

추상화 벽은 세부 구현을 감춘 함수로 이루어진 계층이다. 추상화 벽에 있는 함수를 사용할 때 구현을 전혀 몰라도 함수를 쓸 수 있다.

추상화 벽은 흔하게 사용하는 라이브러리나 API와 비슷하다. 날씨 애플리케이션을 만들기 위해 RainCo라는 회사에서 제공하는 기상 데이터 API를 사용한다고  생각해보자. RainCo의 개발팀은 기상 데이터 서비스를 구현하는 역할을 한다. RainCo 개발팀은 여러분이 만드는 날씨 애플리케이션에 신경쓰지 않는다. 기상 데이터 API는 책임을 명확하게 나눠주는 추상화 벽과 같다.

완전하기 않은 추상화 벽을 완전한 추상화 벽으로 만드는 방법은 추상화 벽에 새로운 함수를 만드는 것이다.

## 추상화 벽은 언제 사용하면 좋을까요?
### 쉽게 구현을 바꾸기 위해
구현에 대한 확신이 없는 경우 추상화 벽을 사용하면 구현을 간접적으로 사용할 수 있기 때문에 나중에 구현을 바꾸기 쉽다. 프로토타이핑과 같이 최선의 구현을 확신할 수 없는 작업에 유용하다. 다른 예로 서버에서 데이터를 받아서 처리해야 하지만 아직은 준비가 되지않아 임시 데이터를 줘야하는 경우도 뭔가 바뀔 것을 알고 있지만 아직 준비되지 않는 경우에도 좋다.

하지만 만약을 대비해 코드를 만드는 경우가 종종 있는데, 오지도 않은 미래를 위해 불필요한 코드를 작성하는 것은 좋지 않은 습관이다.
### 코드를 읽고 쓰기 쉽게 만들기 위해
추상화 벽을 사용하면 세부적인 것을 신경 쓰지 않아도 된다. 때로는 구체적인 것이 버그를 만든다.
### 팀 간에 조율해야 할 것을 줄이기 위해
추상화 벽을 사용하면 각 팀에 관한 구체적인 내용을 서로 신경쓰지 않아도 일할 수 있다. 게다가 더 빠르게 일할 수 있다.
### 주어진 문제에 집중하기 위해
추상화 벽을 사용하면 문제를 해결하기 더 쉽다. 사람은 생각할 수 있는 두뇌의 한계가 있다. 그리고 고민해야할 구체적인 문제가 많다. 추상화 벽을 사용하면 해결하려는 문제의 구체적인 부분을 무시할 수 있다.

## 패턴 2 리뷰: 추상화 벽
추상화 벽은 강력한 패턴이다. 추상화 벽으로 추상화 벽 아래에 있는 코드와 위에 있는 코드의 의존성을 없앨 수 있다. 서로 신경쓰지 않아도 되는 구체적인 벽을 기준으로 나눠서 서로 의존하지 않게  한다.

일반적으로 추상화 벽위에 있는 코드는 데이터  구조와 같은 구체적인 내용을 신경쓰지 않아도 된다. 예제에서도 추상화 벽 위에 있는 마케팅 코드는 장바구니가 배열인지 객체인지 몰라도 코드를 만들 수 있었다.

모든 추상화는 다음과 같이 동작한다. 추상화 단계의 상위에 있는 코드와 하위에 있는 코드는 서로 의존하지 않게 정의한다. 추상화 단계의 모든 함수는 비슷한 세부 사항을 무시할수 있도록 정의한다. 추상화 벽으로 추상화를 강력하고 명시적으로 만들 수 있다. 마케팅 관련 코드는 장바구니가 어떻게 구현되어 잇는지 몰라도 된다.

## 패턴 3: 작은 인터페이스
인터페이스를 최소화하면 하위 계층에 불필요한 기능이 쓸데없이 커지는 것을 막을 수 있다.

작은 인터페이스 패턴을 사용하면 깨끗하고 단순하고 믿을 수 있는 인터페이스에 집중할 수 있다. 그리고 감춰진 코드의 나머지 부분을 대신하는 코드로 사용할 수 있다. 또 인터페이스가 많아져서 생기는 불필요한 변경이나 확장을 막아준다.

추상화 벽에 만든 함수는 인터페이스라고 생각할 수 있다. 추상화 벽에 있는 인터페이스로 어떤 값의 집합에 접근하거나 값을 조작할 수 있다. 그리고 계층형 설계에서 완전한 추상화 벽과 최소한의 인터페이스 사이에 유연하게 조율해야 하는 점이 있다는 것을 알았다.

추상화 벽을 작게 만들어야 하는 이유
1. 추상화 벽에 코드가 많을수록 구현이 변경되었을 때 고쳐야할 것이 많다.
2. 추상화 벽에 있는 코드는 낮은 수준의 코드이기 떄문에 더 많은 버그가 있을 수 있다.
3. 낮은 수준의 코드는 이해하기 어렵다.
4. 추상화 벽에 코드가 많을수록 팀 간에 조율해야할 것도 많아진다.
5. 추상화 벽에 인터페이스가 많으면 알아야 할 것이 많아 사용하기 어렵다.

상위 계층에 어떤 함수를 만들 때 가능한 현재 계층에 있는 함수로 구현하는 것이 작은 인터페이스를 실천하는 방법이다. 일반적으로 그래프에서 상위 계층에 구현하는 것이다 좋다.

추상화 벽을 개선하는데 더 작은 인터페이스를 사용했지만 사실 모든 계층에서 쓸 수 있다. 이상적인 계층은 더도 덜도 아닌 필요한 함수만 가지고 있어야 한다. 함수는 바뀌어도 안되고 나중에 더 늘어나도 안된다. 계층이 가진 함수는 완전하고, 적고, 시간이 지나도 바뀌지 않아야 한다. 이것이 작은 인터페이스가 전체 계층에 사용되는 이상적인 모습이다.

## 패턴 4: 편리한 계층
편리한 계층은 다른 패턴과 다르게 조금 더 현실적이고 실용적인 측면을 다루고 있다.

커다란 계층을 만들면 뿌듯하다. 강력해 보이고 고민해야 할 것 이 별로 없다. 하지만 강력한 추상화 계층은 만들기 어렵다. 시간이 지나면 열심히 만든 추상화 벽이 크게 도움이 되지 않는다고 느낄 것이다. 완벽하지 않고, 없는 것이 더 좋을 것이라고 느낄지도 모른다. 이렇게 추상화 벽을 높게 쌓은 경험이 있을 것이다. 이런 실험과 실패도 과정의 일부다.

추상화는 가능한 일과 불가능한 일의 차이를 나타내기도 한다. 자바스크립트 언어는 기계어에 대한 추상화 벽을 제공한다. 자바스크립트로 코딩을 할 때 기계어를 생각하는 사람은 아무도 없다. 자바스크립트는 기계어와 많은 차이가 있다.

구체적인 것을 너무 많이 알아야 하거나 코드가 지저분해진다면 패턴을 적용해야한다. 어떤 코드도 이상적인 코습에 도달할 수 없다. 언제나 설계와 새로운 기능의 필요성 사이 어느 지점에 머물게 된다. 편리한 계층은 언제 멈춰야 할지 알려준다.


### 호출 그래프
호출 그래프 구조는 세 가지 중요한 비기능적 요구사항을 꾸밈없이 보여준다. 기능적 요구사항은 소프트웨어가 정확히 해야 하는 일을 말한다. 예를들어 세금에 대한 계산을 하면 올바른 계산이 나와야 한다.

비기능적 요구사항은 테스트를 어떻게 할 것인지, 재사용을 잘 할 수 있는지, 유지보수 하기 어렵지 않은지 같은 요구사항들이다.
1. 유지보수성
2. 테스트성
3. 재사용성

