### 들어가기전에
- 객제치향 프로그래밍의 장점 중 하나는 코드를 재사용하기 용이하다는 것이다.
- 전통적인 패러다임에서 코드를 재사용하기 위해 새로운 코드를 추가한다. 하지만 객체지향에서는 새로운 클래스를 추가한다.
- 상속 외에도 코드를 효과적으로 재사용할 수 있는 방법이 한 가지 더 있다. 흔히 합성이라고 부르는 단어다.

### DRY 원칙
중복 코드는 변경을 방해한다. 이것이 중복을 제거해야하는 가장 큰 이유이고, 프로그램의 본질은 비즈니스와 관련된 지식을 코드로 변환하는 것이다. 그리고 소프트웨어는 끈임없이 변한다. 그에 맞춰서  우리는 대비를 해야한다.

#### 중복코드의 문제점이 뭘까?
기존 코드를 수정하는데 필요한 노력을 몇배로 증가시키는 점이다.


> 신뢰할 수 있고 수정하기 쉬운 소프트웨어를 만드는 효과적인 방법중 하나는 중복을 제거하는 것이다. DRY는 "반복하지 마라"라는 뜻의 Don't Repeat Yourself의 첫 글자를 모아 만든 용어다.


### 취약한 기반 클래스 문제
부모 클래스의 변경에 의해 자식 클래스가 영향을 받는 현상을 "취약한 기반 클래스 문제"라고 부른다. 이 문제는 상속을 사용한다면 피할 수 없는 객체지향 프로그래밍의 취약성이다.

취약한 기반 클래스 문제는 상속이라는 문맥 안에서 결합도가 초래하는 문제점을 가리키는 용어다. 상속 관계를 추가할수록 전체 시스템의 결합도가 높아진다는 사실을 알고 있어야 한다.

취약한 기반 클래스 문제는 캡슐화를 약화시키고 결합도를 높인다. 상속은 자식 클래스가 부모 클래스의 구현 세부사항에 의존하도록 만들기 때문에 캡슐화를 약화시킨다. 이것이 상속이 위험한 이유인 동시에 우리가 상속을 피해야하는 이유다.

설계는 트레이드오프 활동이라는 사실을 기억해야한다. 상속은 코드 재사용을 위해 캡슐화를 희생한다. 완벽한 캡슐화를 원한다면 코드 재사용을 포기하거나 상속 이외의 다른 방법을 사용해야한다.

### 상속을 위한 경고
- 자식 클래스의 메서드 안에서 super 참조를 이용해 부모 클래스의 메서드를 직접 호출할 경우 클래스는 강하게 결합된다. super 호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.
- 상속받은 부모 클래스의 메서드가 자식 클래스의 내부 구조에 대한 규칙을 깨트릴 수 있다.
- 자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래스가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.
- 클래스를 상속하면 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나, 자식 클래스와 부모 클래스를 동시에 변경하거나 둘중에 하나를 선택할 수 밖에 없다.

### 추상화에 의존하자
자식 클래스가 부모 클래스의 구현이 아닌 추상화에 의존하도록 만들어야한다. 정확하게 말하면 부모 클래스와 자식 클래스 모두 추상화에 의존해야한다.

코드 중복을 제거하기 위해 상속을 도입할 때 따르는 두가지 원칙
- 두 메서드가 유사하게 보인다면 차이점을 메서드로 추출하라. 메서드 추출을 통해 두 메서드를 동일한 형태로 보이도록 만들 수 있다.
- 부모 클래스의 코드를 하위로 내리지 말고 자식 클래스의 코드를 상위로 올려라. 부모 클래스의 구체적인 메서드를 자식 클래스로 내리는 것보다 자식 클래스의 추상적인 메서드를 부모 클래스로 올리는 것이 재사용성과 응집도 측면에 더 뛰어난 결과를 얻을 수 있다.

우리는 객체 생성 로직이 변경됐을 때 영향을 받는 부분을 최소화하기 위해 노력해야한다. 객체 생성 로직의 변경에 유연하게 대응할 수 있는 다양한 방법이 존재한다. 따라서 객체 생성 로직에 대한 변경을 막기보다는 핵심 로직의 중복을 막아야한다. 핵심 로직은 한곳에 모아 놓고 조심스럽게 캡슐화해야한다. 그리고 공통적인 핵심 로직은 최대한 추상화해야한다.

상속으로 인한 클래스 사이의 결합을 피할 수 있는 방법은 없다. 상속은 어떤 방식으로든 부모 클래스와 자식 클래스를 결합시킨다. 메서드 구현에 대한 결합은 추상 메서드를 추가함으로써 어느 정도 완화할 수 있지만 인스턴스 변수에 대한 잠재적인 결합을 제거할 수 있는 방법은 없다. 우리가 원하는 것은 행동을 변경하기 위해 인스턴스 변수를 추가하더라도 상속 계층 전체에 걸쳐 부작용이 퍼지지 않게 막는 것이다.

### 차이에 의한 프로그래밍
상속을 사용하면 이미 존재하는 클래스의 코드를 기반으로 다른 부분을 구현함으로써 새로운 기능을 쉽고 빠르게 추가할 수 있다. 상속이 강력한 이유는 익숙한 개념을 이용해서 새로운 개념을 쉽고 빠르게 추가할 수 있기 떄문이다.

이처럼 기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장하는 방법을 `차이에 의한 프로그래밍`이라고 부른다. 상속을 사용하면 이미 존재하는 클래스의 코드를 쉽게 재사용할 수 있기 떄문에 애플리케이션의 점진적인 정의가 가능해진다.

차이에 의한 프로그래밍의 목표는 중복 코드를 제거하고 코드를 재사용하는 것이다. 사실 중복 코드 제거와 코드 재사용은 동일한 행동을 가리키는 서로 다른 단어다. 중복을 제거하기 위해서는 코드를 재사용 가능한 단위로 분해하고 재구성해야한다. 코드를 재사용하기 위해서는 중복 코드를 제거해서 하나의 모듈로 모아야한다. 프로그래밍의 세계에서 중복 코드는 악의 근원이다. 따라서 중복 코드를 제거하기 위해 최대한 코드를 재사용해야한다.

상속이 코드 재사용이라는 측면에서 매우 강력한 도구인 것은 사실이지만 강력한 만큼 잘못 사용할 경우 돌아오는 피해도 크다는 사실을 알아야한다.