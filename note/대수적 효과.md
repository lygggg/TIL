대수적 효과(Algebraic Effects)에서 대수는 "수를 대신한다"라는 뜻을 가지고 있다. 어떤 수학적인 문제를 해결할 때, 수들의 연산으로 이를 해결하는 것이 아닌 문자와 문자들 사이의 추상적 관계(함수)들을 통해 이를 해결하는 방식을 "대수적 방식"이라고 하고, 이는 변수와 함수를 사용해서 문제를 해결하는 프로그래밍과도 관련이 있다.


대수적 효과란 exception throw등을 포함하는 연산들의 집합으로 부터 순수하지 못한 행위등이 발생할 수 있다는 전제를 바탕으로 computational Effect에 대해 접근하는 방식이다라는 뜻이다. 앞서 살펴본 "대수"의 정의로부터 미루어봤을 때, "exception throw등을 포함하는 연산들의 집합"은 "수를 대신하는 변수를 사용하는 프로그램에서 목적을 달성하기 위한 연산들이 일어나고, 그 연산의 집합의 구성요소중 하나로 exception throw등이 있다"라고 이해할 수 있다. 즉 대수적 효과란 대수를 사용해서 연산을 수행할 때 순수하지 못한 행위들이 일어날 수 있고, 이를 전제로 Computational Effect에 대해 접근하는 방식이라는 것이다.(내가 알고있는 suspense와 처리방식이 동일하다는것이 보인다)

다시한번 정리하자면 대수적 효과란 `서로 다른 환경 사이의 interaction에서 발생하는 Computation Effects에 대한 접근 방식을 의미한다. 여기에는 전제가 있는데, 이러한 컴퓨터 동작들 집합들로부터 순수하지 못한 효과가 발생한다는 것이다.`

그럼 대수적 효과의 접근 방식은 적절한 handler를 사용하는 것을 의미한다.

즉 대수적 효과(Algebraic Effects)는 서로 다른 환경 사이의 interaction(상호작용)에서는 순수하지않은 sideEffect가 발생할 수 있는데, 이것을 적절한 handler를 사용해 해결하는 방식을 의미한다. 여기서 handler는 sub-expression에서 발생시킨 effect를 central-control에서 잡아 적절하게 처리한 뒤, 다시 sub-expression이 멈췄던 곳으로 흐름을 되돌려주는 것이다.

왜 React Suspense에 대수적 효과가 영향을 미쳤다는 걸까?  Dan Abramov는 대수적 효과의 정확한 개념 모델에 영향을 받은게 아니라 여기서 영감을 얻었다고만 한다.

대수적 효과는 부모 컴포넌트(Suspense)와 자식 컴포넌트 사이의 interaction에서 발생한 SideEffect(throw Promise)를 적절한 Handler(catch Promise in Suspense)를 사용해 해결하는 방식을 의미하는 것이고, 이 handler는 자식 컴포넌트에서 발생시킨 sideEffect를 잡아 적절하게 처리한 뒤, 다시 자식 컴포넌트가 멈췄던 곳으로 흐름을 되돌려주는 것이다.

이렇게 보면 대수적 효과와 Suspense의 연관성이 보이기 시작하는 것 같다. 대수적 효과는 어떤 코드 조각을 감싸는 맥락으로 책임을 분리하고, 분리된 책임에 대한 처리는 감싸는 맥락에서 처리하게 함으로써 "무엇"과 "어떻게"를 분리한다. 이렇게 책임을 분리하는 방식은 코드를 조금 더 "선언적"으로 작성할 수 있는 관점을 제공하며, 이것은 React가 지향하는 것과 완전히 동일하다.

Suspense는 대수적 효과를 영향을 받아서 부모 컴포넌트에게 로딩 상태에 대한 처리의 "책임"을 넘겼고, 따라서 메인 컴포넌트에서 로딩 UI 표시의 책임을 "분리"하게 된다. 이는 UI 컴포넌트를 좀 더 선언적으로 작성하도록 만들어준다.


- https://overreacted.io/ko/algebraic-effects-for-the-rest-of-us/
- https://yeoulcoding.me/331