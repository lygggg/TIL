이벤트 소싱은 데이터 저장 방법에 대한 것이다. 평소에 우리는 어떠한 로직을 처리하고, 그 결과값만을 저장해왔다. 하지만 이벤트 소싱은 순차적으로 발생하는 모든 이벤트를 저장한다.

```ts
const itemOps = [["add", "shirt"], ["add", "shoes"], ["remove", "shirt"], ["add", "socks"], ["remove", "hat"]...]
```

만약 우리가 장바구니에 상품을 담았을 때 추가, 삭제되고 마지막 데이터만을 저장하는게 아니라, 흐름의 과정을 저장한다고 보면 된다.

### 스냅샷
그럼 결국 현재의 최종값을 얻기 위해서는 저장된 흐름을 순차적으로 계산하면 된다. 하지만 데이터의 길이가 길어질수록 처리시간은 지연될 수 밖에 없다. 사용자가 장바구니에 100000번 추가했다가 삭제했다는 반복한다면, 1부터 100000번까지 새롭게 반복해야한다. 이 문제를 해결하기 위해서 스냅샷을 도입했다. 1000번째 이벤트가 발생할 떄 스냅샷으로 저장해두면 결국 최종값은 1001번쨰 이벤트부터 재생해서 얻을 수 있다.

### CQRS
만약 셔츠만 담은 사용자 리스를 반환해주세요 라고 한다면 굉장히 오래걸릴 것이다. 그래서 CQRS는 이벤트 소싱과 궁합이 좋다.

CQRS(Command and Query Responsibility Segregation는 상태를 변경하는 Command와 조회를 담당하는 Query를 Object 혹은 시스템 담위로 분리시키는 것을 말한다.

책을 읽다가 나온 개념이다. 현재까지는 사용할 일이 없어서 간단하게 정리해놓았다.

### 출처
- 쏙쏙 들어오는 함수형 코딩
- https://mjspring.medium.com/%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%86%8C%EC%8B%B1-event-sourcing-%EA%B0%9C%EB%85%90-50029f50f78c